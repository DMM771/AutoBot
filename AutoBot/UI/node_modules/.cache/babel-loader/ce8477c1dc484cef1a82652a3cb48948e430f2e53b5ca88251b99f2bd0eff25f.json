{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/\\u05D0\\u05D5\\u05E8\\u05D0\\u05DC \\u05DE\\u05E9\\u05E2\\u05DF/Desktop/\\u05DC\\u05D9\\u05DE\\u05D5\\u05D3\\u05D9\\u05DD/chatbot/UI/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"C:/Users/\\u05D0\\u05D5\\u05E8\\u05D0\\u05DC \\u05DE\\u05E9\\u05E2\\u05DF/Desktop/\\u05DC\\u05D9\\u05DE\\u05D5\\u05D3\\u05D9\\u05DD/chatbot/UI/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"C:/Users/\\u05D0\\u05D5\\u05E8\\u05D0\\u05DC \\u05DE\\u05E9\\u05E2\\u05DF/Desktop/\\u05DC\\u05D9\\u05DE\\u05D5\\u05D3\\u05D9\\u05DD/chatbot/UI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{Link}from\"react-router-dom\";import InputSec from\"./InputSec\";import{useRef,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function checkIfRegistered(_x,_x2){return _checkIfRegistered.apply(this,arguments);}function _checkIfRegistered(){_checkIfRegistered=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(username,password){var params,request,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:params={username:username,password:password};request={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(params)};_context2.next=4;return fetch(\"http://localhost:58112/api/Users/login\",request);case 4:res=_context2.sent;return _context2.abrupt(\"return\",res.ok);case 6:case\"end\":return _context2.stop();}},_callee2);}));return _checkIfRegistered.apply(this,arguments);}function login(_x3,_x4){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(username,password){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!(password.current.value.length<8||username.current.value.length===0)){_context3.next=3;break;}alert(\"Input is invalid!\");return _context3.abrupt(\"return\",false);case 3:_context3.next=5;return checkIfRegistered(username.current.value,password.current.value);case 5:return _context3.abrupt(\"return\",_context3.sent);case 6:case\"end\":return _context3.stop();}},_callee3);}));return _login.apply(this,arguments);}function LoginPage(){var userid={id:\"\"};var username=useRef(null);var password=useRef(null);var nextPage=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var check=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var isLog;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return login(username,password);case 3:isLog=_context.sent;if(isLog){nextPage.current.click();}else{setError(true);}case 5:case\"end\":return _context.stop();}},_callee);}));return function check(_x5){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{id:\"app\",className:\"shadow log-reg-background\",children:[/*#__PURE__*/_jsx(\"header\",{children:\"MESSENGER\"}),/*#__PURE__*/_jsx(Link,{to:\"/chat\",state:userid,ref:nextPage}),/*#__PURE__*/_jsx(InputSec,{text:\"Username\",type:\"text\",id:username}),/*#__PURE__*/_jsx(InputSec,{text:\"Password\",type:\"password\",id:password}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:\"username or password wrong\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary btn-sm shadow\",onClick:check,children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"register\",children:[\"Not registered? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Click here\"}),\" to register\"]})]})]});}export default LoginPage;","map":{"version":3,"names":["Link","InputSec","useRef","useState","jsx","_jsx","jsxs","_jsxs","checkIfRegistered","_x","_x2","_checkIfRegistered","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","username","password","params","request","res","wrap","_callee2$","_context2","prev","next","method","headers","body","JSON","stringify","fetch","sent","abrupt","ok","stop","login","_x3","_x4","_login","_callee3","_callee3$","_context3","current","value","length","alert","LoginPage","userid","id","nextPage","_useState","_useState2","_slicedToArray","error","setError","check","_ref","_callee","event","isLog","_callee$","_context","preventDefault","click","_x5","className","children","to","state","ref","text","type","onClick"],"sources":["C:/Users/אוראל משען/Desktop/לימודים/chatbot/UI/src/LoginPage.js"],"sourcesContent":["import {Link} from \"react-router-dom\";\r\nimport InputSec from \"./InputSec\";\r\nimport {useRef, useState} from \"react\";\r\n\r\n\r\nasync function checkIfRegistered(username, password) {\r\n    const params = {\r\n        username: username,\r\n        password: password\r\n    }\r\n    const request = {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(params),\r\n    };\r\n    let res = await fetch(\"http://localhost:58112/api/Users/login\", request);\r\n    return res.ok;\r\n}\r\n\r\nasync function login(username, password) {\r\n    if (password.current.value.length < 8 || username.current.value.length === 0) {\r\n        alert(\"Input is invalid!\");\r\n        return false;\r\n    }\r\n\r\n    return await checkIfRegistered(username.current.value, password.current.value);\r\n}\r\n\r\n\r\nfunction LoginPage() {\r\n    let userid={id:\"\"};\r\n    const username = useRef(null);\r\n    const password = useRef(null);\r\n    const nextPage = useRef(null);\r\n    let [error, setError] = useState(false);\r\n    const check = async (event) => {\r\n        event.preventDefault();\r\n        const isLog = await login(username, password)\r\n        if (isLog) {\r\n            nextPage.current.click();\r\n        } else {\r\n            setError(true);\r\n        }\r\n    }\r\n    return (\r\n        <div id=\"app\" className=\"shadow log-reg-background\">\r\n            <header>MESSENGER</header>\r\n            <Link to=\"/chat\" state={userid} ref={nextPage}/>\r\n            <InputSec text=\"Username\" type=\"text\" id={username}/>\r\n            <InputSec text=\"Password\" type=\"password\" id={password}/>\r\n            {error && <div className=\"text-danger\">username or password wrong</div>}\r\n            <div className=\"mb-3 mt-2\">\r\n                <button type=\"button\" className=\"btn btn-primary btn-sm shadow\" onClick={check}>Login\r\n                </button>\r\n                <div id=\"register\">Not registered? <Link to=\"/register\">Click here</Link> to register</div>\r\n            </div>\r\n        </div>);\r\n}\r\n\r\nexport default LoginPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}